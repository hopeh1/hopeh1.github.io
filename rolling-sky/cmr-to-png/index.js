!function(){let a={},i={};var e={"cmr-decompile-file":"png","cmr-compile-file":"cmr"};const o={"cmr-decompile-file":document.getElementById("cmr-decompile-canvas-preview"),"cmr-compile-file":document.getElementById("cmr-compile-canvas-preview")},m={"cmr-decompile-file":document.getElementById("cmr-decompile-downloadFile"),"cmr-compile-file":document.getElementById("cmr-compile-downloadFile")};function t(n){document.getElementById(n).addEventListener("change",c=>{var l;1==c.target.files.length&&(o[n].src="processing.gif",(l=new FileReader).onload=function(){fetch("convert.php",{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:"name="+c.target.files[0].name+"&to="+e[n]+"&data="+encodeURIComponent(l.result.split(",")[1])}).then(e=>200<=e.status&&e.status<=299?e.text():(alert("HTTP Error: "+e.statusText),null)).then(e=>{if(e){var t=JSON.parse(e);switch(t.code){case 0:a[n]="data:application/octet-stream;base64,"+t.message,"png"==t.extension?o[n].src="data:image/png;base64,"+t.message:o[n].src=l.result,i[n]=c.target.files[0].name.split(".").slice(0,-1).join(".")+"."+t.extension,m[n].disabled=!1;break;case 1:alert(t.message),o[n].src="placeholder.png",m[n].disabled=!0}c.target.value=""}else o[n].src="placeholder.png"})},l.readAsDataURL(c.target.files[0]))})}function c(e){var t=document.createElement("a");t.href=a[e],t.download=i[e],t.click()}document.getElementById("cmr-decompile-downloadFile").addEventListener("click",()=>{c("cmr-decompile-file")}),document.getElementById("cmr-compile-downloadFile").addEventListener("click",()=>{c("cmr-compile-file")}),t("cmr-decompile-file"),t("cmr-compile-file")}();